campaignTrail_temp.election_json = [
    {
        "model": "campaign_trail.election",
        "pk": 10,
        "fields": {
            "year": 1976,
            "summary": "<div style='overflow-y:scroll;height:200px;'><b>Bleeding.</b><br><br>The entire dam nation is bleeding. Cut down by decades of hate, political instability and economic pain.<br><br>Nixon resigned in disgrace. Ford got shot dead by some beatnik. Incumbent President Rockefeller is bedridden after another heart attack. The GOP has been bled dry by corruption.<br><br>And like a bolt of Captain Marvels lighting, Elvis arrived. A straight talking washed up movie star with a Southern drawl, the formally famous artist cinched the nomination in a near desolate field following Rockefellers dramatic dropout. He's got to keep the skeletons in the closet, unite a fractured party and deliver a win for the party of Lincoln's toughest election to date. But it can all blow up in his face. The liberal and conservative factions are knawing at the party's sides, both threatening to buck you should something go afowel.<br><br>But the Democrats aren't down for the count. After the McGovern/Carter debacle of '72, they've given up on appealing to anyone leaning right. Nowk they've put all their stock into the growing grassroots movement of leftist Lyndon LaRouche. The<br>demagogic Congress member is vowing to deliver an America that works for everyone, not just the elites. But he has a pretty backwards idea about who is considered an elite. So long as he can keep a handle on his more extreme views, New Left LaRouche can sail in ease to the White House.<br><br>The stage of America's bicentennial is set. And the winner will have America's soul.<br><br>God help us all.</div>",
            "image_url": "https://i.ibb.co/whqnwPkm/Untitled538-20251115124801.png",
            "winning_electoral_vote_number": 270,
            "advisor_url": "https://www.jetsimon.com/public/static/images/jordan-cheney-1976.jpg",
            "recommended_reading": "<h4 style=\"margin-top: 0.5em;\">1976 Election Books and Biographies</h4><a href=\"http://www.amazon.com/exec/obidos/ASIN/0670454613/amhius20-20\" target=\"_blank\">Jules Witcover - Marathon: The Pursuit of the Presidency, 1972-1976</a></br><a href=\"http://www.amazon.com/exec/obidos/ASIN/1590843630/amhius20-20\" target=\"_blank\">The Election of 1976 and the Administration of Jimmy Carter</a></br><a href=\"http://www.amazon.com/exec/obidos/ASIN/B007V955ZS/amhius20-20\" target=\"_blank\">Craig Shirley - Reagan's Revolution: The Untold Story of the Campaign That Started It All</a></br><a href=\"http://www.amazon.com/exec/obidos/ASIN/B001KBY7YI/amhius20-20\" target=\"_blank\">Douglas Brinkley - Gerald R. Ford</a></br><a href=\"http://www.amazon.com/exec/obidos/ASIN/0805089578/amhius20-20\" target=\"_blank\">Julian E. Zelizer - Jimmy Carter</a>",
            "has_visits": 1,
            "no_electoral_majority_image": "https://www.jetsimon.com/public/static/images/2012-no-majority.jpg",
            "creator": "Dan Bryan",
            "display_year": "1976PK"
        }
    }
]

campaignTrail_temp.candidate_json = [
    {
        "model": "campaign_trail.candidate",
        "pk": 91,
        "fields": {
            "first_name": "Lyndon",
            "last_name": "LaRouche",
            "election": 10,
            "party": "Democrat",
            "state": "Virginia",
            "priority": 1,
            "description": "<p>Jimmy Carter has served as Governor of Georgia for one term, and has never held an elected office in Washington. In an era of public disgust with Watergate, Vietnam, and the economy, Carter has used his outsider status to win the Democratic nomination. He is an outspoken Southern Baptist, and a moderate within the party on social and economic issues. He begins with an early lead in the polls against Gerald Ford.</p>",
            "color_hex": "#0000FF",
            "secondary_color_hex": "#90C0FF",
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/static/images/jimmy-carter-1976.jpg",
            "electoral_victory_message": "<h3>Congratulations! You have won the 1976 Presidential Election.</h3><p>Hopefully you can make good on your promises to clean up Washington and change the political and moral culture of the country. If you are successful, there is no reason you cannot run for reelection in 1980. Just be wary of any economic problems, or of some foreign policy crisis that could dent your popularity.</p>",
            "electoral_loss_message": "<h3>Sorry, you have lost the 1976 Presidential Election.</h3><p>As an outsider candidate, this was really your moment to make an impact on American politics and to win a national election. The beltway gossip already has it that Ted Kennedy is the frontrunner for the 1980 nomination. Perhaps you can run again for Governor of Georgia, or make an impact in some other way.</p>",
            "no_electoral_majority_message": "<h3>Wow! You have won in a squeaker.</h3><p>While the Electoral College ended in a tie, the Democrats have a huge advantage in the House of Representatives and are sure to elect you in that manner. Hopefully the closeness of this election doesn't undermine your promises to clean up Washington and unite the people of this country.</p>",
            "description_as_running_mate": "''",
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 92,
        "fields": {
            "first_name": "Elvis",
            "last_name": "Presley",
            "election": 10,
            "party": "Republican",
            "state": "tennessee",
            "priority": 2,
            "description": "<div style='overflow-y:scroll;height:200px;'>You felt your temperature arising. Those feel good pills Dr. Nic got you on hadn't sat well with what little you'd been eating over the last few days. Your mind wanders, focused on the feeling of signing this same gospel song back oh so many years ago at the black majority church of your childhood.<br><br>You miss a step.<br><br>You tumble.<br><br>You reach the end of the stairs.<br><br>The ambulance shakes, rattles and rolls as it speeds to the hospital. All the while you're talking to Mama, Priscilla and Lisa Marie. Oh God, why did you have to take those three? Why'd you make them angels?<br><br>You talk, for what feels like an eternity. Your whole life laid bare. You see dark flashes of some future Vegas residency. Propped up by the Colonel and hangers on. A fat, drugged up joke. One who didn't even get to see middle age.<br><br>They tell you to avoid this. To do anything else. Be anyone else. Just not this.<br><br>As the doctors pull you back from the brink, you spook them by bolting up. Like Frankenstein's monster, you've been given new life. But this is no horror picture show.<br><br>You are Elvis Presley, and by Christ you'll win in 1976...</div>",
            "color_hex": "#FF0000",
            "secondary_color_hex": "#FFA0A0",
            "is_active": 1,
            "image_url": "https://i.ibb.co/TMyjr27Z/Untitled531-20251114183142.png",
            "electoral_victory_message": "<h3>Congratulations! You have won the 1976 Presidential Election.</h3><p>Hopefully you can continue to help the United States recover from the Watergate Scandal, the recent recession, and the debacle of Vietnam. In either case, this will be your final term as President. Speculation is sure to be intense on who will replace you. Will it be Ronald Reagan? Ted Kennedy? Or someone else entirely?</p>",
            "electoral_loss_message": "<h3>Sorry, you have lost the 1976 Presidential Election.</h3><p>Hopefully your opponent can make good on his promises to clean up Washington and change the political and moral culture of the country. Perhaps you can still play a role in 1980, or seek your old Congressional leadership positions. In any case, you can still take solace in the fact that you did the right thing by pardoning Nixon and moving the country beyond the Watergate episode.</p>",
            "no_electoral_majority_message": "<h3>Sorry, you have lost the 1976 Presidential Election.</h3><p>While the Electoral College ended in a tie, the Democrats have a huge advantage in the House of Representatives and are sure to elect your opponent in that manner. Perhaps you can still play a role in 1980, or seek your old Congressional leadership positions. In any case, you can still take solace in the fact that you did the right thing by pardoning Nixon and moving the country beyond the Watergate episode.</p>",
            "description_as_running_mate": "''",
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 93,
        "fields": {
            "first_name": "Eugene",
            "last_name": "McCarthy",
            "election": 10,
            "party": "Independent",
            "state": "Minnesota",
            "priority": 3,
            "description": "''",
            "color_hex": "#00C100",
            "secondary_color_hex": "#A1FFA1",
            "is_active": 0,
            "image_url": "''",
            "electoral_victory_message": "''",
            "electoral_loss_message": "''",
            "no_electoral_majority_message": "''",
            "description_as_running_mate": "''",
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 94,
        "fields": {
            "first_name": "Other",
            "last_name": "Candidates",
            "election": 10,
            "party": "Independent",
            "state": "Alaska",
            "priority": 4,
            "description": "''",
            "color_hex": "#FFFF00",
            "secondary_color_hex": "#FFFFC0",
            "is_active": 0,
            "image_url": "''",
            "electoral_victory_message": "''",
            "electoral_loss_message": "''",
            "no_electoral_majority_message": "''",
            "description_as_running_mate": "''",
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 95,
        "fields": {
            "first_name": "Walter",
            "last_name": "Mondale",
            "election": 10,
            "party": "Democrat",
            "state": "Minnesota",
            "priority": 5,
            "description": "''",
            "color_hex": "#0000FF",
            "secondary_color_hex": "#90C0FF",
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/static/images/walter-mondale-1976.jpg",
            "electoral_victory_message": "''",
            "electoral_loss_message": "''",
            "no_electoral_majority_message": "''",
            "description_as_running_mate": "<p>Walter Mondale is a Senator from Minnesota, a protege of Hubert H. Humphrey, and a key figure for mainstream Democrats. He would help unite the party after a competitive primary, and could help greatly in his home state. Mondale is also a good team player and very eager to help on the campaign.</p>",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 99,
        "fields": {
            "first_name": "John",
            "last_name": "Connally",
            "election": 10,
            "party": "Republican",
            "state": "Texas",
            "priority": 9,
            "description": "''",
            "color_hex": "#FF0000",
            "secondary_color_hex": "#FFA0A0",
            "is_active": 0,
            "image_url": "https://i.ibb.co/XZNvp2Fd/Untitled531-20251114183854.png",
            "electoral_victory_message": "''",
            "electoral_loss_message": "''",
            "no_electoral_majority_message": "''",
            "description_as_running_mate": "Involved.<br><br>That's the word Connally used to describe his career. He was in the same car as Kennedy in Dallas. He was a top student of LBJ. He was on the short list to be VP before Watergate broke.<br><br>He knew Presley only chose him because of his connection. His bi-partisan appeal to older voters, on both sides of the aisle, who felt disenfranchised with the Democrats sharp left turn. And that older crowd appeal would have to work, considering his running mate would barely be 42 if he won.<br><br>Now here he was, VP candidate again for the Republicans in 1976. Not bad for being a Democrat less than five years",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 103,
        "fields": {
            "first_name": "...",
            "last_name": "Other",
            "election": 10,
            "party": "Independent",
            "state": "Alaska",
            "priority": 13,
            "description": "''",
            "color_hex": "#00C100",
            "secondary_color_hex": "#A1FFA1",
            "is_active": 0,
            "image_url": "''",
            "electoral_victory_message": "''",
            "electoral_loss_message": "''",
            "no_electoral_majority_message": "''",
            "description_as_running_mate": "''",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 104,
        "fields": {
            "first_name": "...",
            "last_name": "Other",
            "election": 10,
            "party": "Independent",
            "state": "Alaska",
            "priority": 14,
            "description": "''",
            "color_hex": "#FFFF00",
            "secondary_color_hex": "#FFFFC0",
            "is_active": 0,
            "image_url": "''",
            "electoral_victory_message": "''",
            "electoral_loss_message": "''",
            "no_electoral_majority_message": "''",
            "description_as_running_mate": "''",
            "candidate_score": 0,
            "running_mate": true
        }
    }
]

campaignTrail_temp.running_mate_json = [
    {
        "model": "campaign_trail.running_mate",
        "pk": 67,
        "fields": {
            "candidate": 94,
            "running_mate": 104
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 66,
        "fields": {
            "candidate": 93,
            "running_mate": 103
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 62,
        "fields": {
            "candidate": 92,
            "running_mate": 99
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 58,
        "fields": {
            "candidate": 91,
            "running_mate": 95
        }
    }
]

campaignTrail_temp.credits = "MuskieNotMusk (Creator of Timeline, and Lead Writer) and RosemaryThe (Coder and Writer)<p>Music Player from 2024: No More MAGA</p><p>Larger Election Image from 1988: This Time With Hart"

campaignTrail_temp.global_parameter_json = [
    {
        "model": "campaign_trail.global_parameter",
        "pk": 1,
        "fields": {
            "vote_variable": 1.125,
            "max_swing": 0.12,
            "start_point": 0.94,
            "candidate_issue_weight": 10,
            "running_mate_issue_weight": 3,
            "issue_stance_1_max": -0.71,
            "issue_stance_2_max": -0.3,
            "issue_stance_3_max": -0.125,
            "issue_stance_4_max": 0.125,
            "issue_stance_5_max": 0.3,
            "issue_stance_6_max": 0.71,
            "global_variance": 0.01,
            "state_variance": 0.005,
            "question_count": 25,
            "default_map_color_hex": "#C9C9C9",
            "no_state_map_color_hex": "#999999"
        }
    }
]

campaignTrail_temp.opponents_default_json = [
    {
        "election": 10,
        "candidates": [
            91,
            92,
            93,
            94
        ]
    }
]

campaignTrail_temp.opponents_weighted_json = [
    {
        "election": 10,
        "candidates": [
            91,
            92,
            93,
            94
        ]
    }
]

campaignTrail_temp.temp_election_list = [
    {
        "id": 10,
        "year": 1976,
        "is_premium": 0,
        "display_year": "1976PK"
    }
]

jet_data = {
    "headerColor": "#000000",
    "windowColor": "#c5001e",
    "containerColor": "#940015",
    "innerWindowColor": "#c5001e",
    "bannerImageUrl": "https://i.ibb.co/Q3rHwSMG/Untitled530-20251114181346.png",
    "backgroundImageUrl": "https://i.ibb.co/prkJWn7v/Untitled537-20251115104745.png",
    "endingTextColor": "#E4000F",
    "customQuote": "",
    "gameTitle": "THE CAMPAIGN TRAIL"
}

//#startcode


corrr = '\n              <h2 style="font-style: normal; color:#E4000F;"><b>THE CAMPAIGN TRAIL</b></h2>\n            ';


nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#000000";

nct_stuff.themes[nct_stuff.selectedTheme].coloring_window = "#c5001e";

document.getElementsByClassName("game_header")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_title;

$("#game_window")[0].style.background = "#880c1e url('https://i.ibb.co/X9R9HCz/Untitled535-20251115103658.png') repeat";

$(".container")[0].style.backgroundColor = "#940015";

document.getElementById("header").src = "https://i.ibb.co/Q3rHwSMG/Untitled530-20251114181346.png";

document.body.background = "https://i.ibb.co/prkJWn7v/Untitled537-20251115104745.png";

document.head.innerHTML += "<style>#results_container {color:#ffffff;} .inner_window_w_desc {background-color:#c5001e!important;}</style>";

const style_overwrite = document.createElement("style");
style_overwrite.innerHTML = 
        `a {
            color: #79b1db;
        }
        #election_image img {
            width: 348px;
            height: 210px;
            margin-left: -0.95em;
            margin-top: -0.85em;
        }
        `;
document.head.appendChild(style_overwrite);

var changeGameDisp = (hide) => {
  disp = "";
  if (hide) {
    disp = "none";
  }
  document.getElementsByClassName("inner_window_w_desc")[0].style.display = disp
};

e.creditsPage = () => {
  credits_html = `

  `
  changeGameDisp(true);
  var spacer = document.createElement("amongusspacerthisisntarealelement");
  spacer.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";
  document
    .getElementsByClassName("inner_window_w_desc")[0]
    .children[1].appendChild(spacer);
    changeGameDisp(true);
    var menuHeader = document.createElement("div");
    menuHeader.classList.add("inner_window_front");
    menuHeader.innerHTML = `<h1 style='margin-top: 0.4em;'><font id='Gothic' size='6' color='#9f2898'><i>THIS TIME, WITH HART</i> was made possible by:</font></h1>`;
    menuHeader.id = "SOTUheader";
    menuHeader.style = "height: 50px;background-color:#212121";
    var newMenu = document.createElement("div");
    newMenu.classList.add("inner_window_front");
    newMenu.id = "SOTUmenu";
    newMenu.style = `height:303px;background-color:#212121;color:white;overflow-y: scroll;`;

    newMenu.innerHTML = credits_html;
    let z = document.getElementById("game_window");
    var backButton = document.createElement("button");
    backButton.style =
      "position: relative; bottom: -4px; left: -392px; width: 130px; height: 50px;font-size:20px;padding-top:5px;padding-left:8px";
    backButton.id = "backSOTUBtn";
    backButton.innerHTML = `<b>BACK</b>`;
    backButton.onclick = function () {
      document.getElementById("SOTUheader").remove();
      document.getElementById("SOTUmenu").remove();
      document.getElementById("backSOTUBtn").remove();
      changeGameDisp(false);
    };
    z.appendChild(menuHeader);
    z.appendChild(newMenu);
    z.appendChild(backButton);

}
campaignTrail_temp.musicOn = true

// -- Enlarge the sliders horizontally ---------------------------------
;(function() {
  const css = `
    /* make both volume & progress bars longer */
    #volume_slider,
    #progress_slider {
      width: 400px !important;
    }
  `;
  const style = document.createElement("style");
  style.textContent = css;
  document.head.appendChild(style);
})();

// -- Enlarge track title & artist text --------------------------------
;(function() {
  const css = `
    /* make the main title bigger */
    #track_name {
      font-size: 28px !important;
      line-height: 1.2 !important;
    }
    /* make the artist name bigger */
    #artist_name {
      font-size: 20px !important;
      line-height: 1.2 !important;
    }
  `;
  const style = document.createElement("style");
  style.textContent = css;
  document.head.appendChild(style);
})();

// -- Make the Volume/Progress labels white ----------------------------
;(function() {
  const css = `
    /* target the labels for your sliders */
    label[for="volume_slider"],
    label[for="progress_slider"] {
      color: #fff !important;
    }
  `;
  const style = document.createElement("style");
  style.textContent = css;
  document.head.appendChild(style);
})();

// -- Hide original controls --------------------------------------------
$("#music_player")[0].children[0].style.display = "none";
$("#music_player")[0].children[1].style.display = "none";
document.getElementById("modLoadReveal").style.display = "none";
document.getElementById("modloaddiv").style.display = "none";

// -- Style the container like your mockup ------------------------------
const musicBox = document.getElementById("music_player");
musicBox.style.cssText = `
  display: flex;
  align-items: center;
  gap: 20px;
  padding: 20px;
  background: #880c1e;
  border: 5px solid #FFFFFF;
  border-radius: 10px;
  max-width: 900px;
  margin: auto;
  font-family: Arial, sans-serif;
`;

// -- Utility -----------------------------------------------------------
function clamp(idx, max, min = 0) {
  return idx > max ? min : idx < min ? max : idx;
}

// -- Game state bootstrap ----------------------------------------------
e = campaignTrail_temp;
e.selectedSoundtrack = 0;

// -- Build the custom player -------------------------------------------
function newMusicPlayer() {
  // remove old UI
  const old = document.getElementById("custom_player_wrapper");
  if (old) old.remove();

  const audio = document.getElementById("campaigntrailmusic");
  audio.preload = "metadata";

  // flex wrapper: small gap so text sits right next to image
  const wrapper = document.createElement("div");
  wrapper.id = "custom_player_wrapper";
  wrapper.style.cssText = `
    display: flex;
    align-items: center;
    gap: 8px;
    width: 100%;
  `;

  // 1) Album cover (left)
  const cover = document.createElement("div");
  cover.id = "album_cover";
  cover.style.cssText = `
    width: 150px;
    height: 150px;
    background: #ddd;
    border: 3px solid #FFFFFF;
    background-size: cover;
    background-position: center;
    flex-shrink: 0;
  `;

  // 2) Details column (right of cover), centered
  const details = document.createElement("div");
  details.style.cssText = `
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  `;

  // 2a) Track info (now centered)
  const info = document.createElement("div");
  info.style.cssText = "margin-bottom: 10px; text-align: center; width: 100%;";
  const titleEl = document.createElement("div");
  titleEl.id = "track_name";
  titleEl.style.cssText = "font-size:20px; color:#fff; font-weight:bold;";
  const artistEl = document.createElement("div");
  artistEl.id = "artist_name";
  artistEl.style.cssText = "font-size:14px; color:#fff;";
  info.append(titleEl, artistEl);

  // 2b) Sliders
  const sliders = document.createElement("div");
  sliders.style.cssText = "display:flex; flex-direction:column; gap:8px; margin-bottom:10px;";

  // volume
  const volRow = document.createElement("div");
  volRow.style.cssText = "display:flex; align-items:center; gap:10px;";
  const volLabel = document.createElement("label");
  volLabel.htmlFor = "volume_slider";
  volLabel.innerText = "Volume:";
  volLabel.style.width = "70px";
  const volumeSlider = document.createElement("input");
  volumeSlider.id = "volume_slider";
  volumeSlider.type = "range";
  volumeSlider.min = 0;
  volumeSlider.max = 1;
  volumeSlider.step = 0.01;
  volumeSlider.value = 0.5;
  volumeSlider.style.flex = "1";  // size controlled by injected CSS
  volRow.append(volLabel, volumeSlider);

  // progress
  const progRow = document.createElement("div");
  progRow.style.cssText = "display:flex; align-items:center; gap:10px;";
  const progLabel = document.createElement("label");
  progLabel.htmlFor = "progress_slider";
  progLabel.innerText = "Progress:";
  progLabel.style.width = "70px";
  const progressSlider = document.createElement("input");
  progressSlider.id = "progress_slider";
  progressSlider.type = "range";
  progressSlider.min = 0;
  progressSlider.max = 1;
  progressSlider.step = 0.001;
  progressSlider.value = 0;
  progressSlider.style.flex = "1"; // size controlled by injected CSS
  progRow.append(progLabel, progressSlider);

  sliders.append(volRow, progRow);

  // 2c) Controls row
  const controlsWrap = document.createElement("div");
  controlsWrap.style.cssText = "display:flex; align-items:center;";
  const prevBtn = document.createElement("button");
  prevBtn.id = "prev_btn";
  prevBtn.innerText = "Prev";
  prevBtn.style.cssText = "padding:5px 10px; margin-right:5px; font-size:16px; cursor:pointer;";
  const playBtn = document.createElement("button");
  playBtn.id = "play_pause_btn";
  playBtn.innerText = "Play";
  playBtn.style.cssText = "padding:5px 10px; margin-right:5px; font-size:16px; cursor:pointer;";
  const nextBtn = document.createElement("button");
  nextBtn.id = "next_btn";
  nextBtn.innerText = "Next";
  nextBtn.style.cssText = "padding:5px 10px; margin-right:5px; font-size:16px; cursor:pointer;";
  const dropdown = document.createElement("select");
  dropdown.id = "track_dropdown";
  dropdown.style.cssText = "padding:5px; font-size:14px; margin-left:10px; cursor:pointer;";
  controlsWrap.append(prevBtn, playBtn, nextBtn, dropdown);

  // assemble
  details.append(info, sliders, controlsWrap);
  wrapper.append(cover, details);
  musicBox.insertBefore(wrapper, audio);

  // populate & hook up
  const tracks = soundtracks[e.selectedSoundtrack].tracklist;
  tracks.forEach((t, i) => {
    const opt = document.createElement("option");
    opt.value = i;
    opt.textContent = `${t.name} - ${t.artist}`;
    dropdown.append(opt);
  });

  let currentIndex = 0;
  function loadTrack(i) {
    const t = tracks[i];
    audio.src = t.url;
    cover.style.backgroundImage = `url('${t.cover}')`;
    titleEl.innerText = t.name;
    artistEl.innerText = t.artist;
    dropdown.value = i;
    audio.currentTime = 0;
    audio.loop = false;
    audio.play();
    playBtn.innerText = "Pause";
    currentIndex = i;
  }
  loadTrack(0);

  playBtn.onclick = () => {
    if (audio.paused) {
      audio.play();
      playBtn.innerText = "Pause";
    } else {
      audio.pause();
      playBtn.innerText = "Play";
    }
  };
  prevBtn.onclick = () => loadTrack(clamp(currentIndex - 1, tracks.length - 1));
  nextBtn.onclick = () => loadTrack(clamp(currentIndex + 1, tracks.length - 1));
  dropdown.onchange = e => loadTrack(+e.target.value);
  volumeSlider.oninput = e => (audio.volume = +e.target.value);
  progressSlider.oninput = e => {
    if (audio.duration) audio.currentTime = +e.target.value * audio.duration;
  };
  audio.ontimeupdate = () => {
    if (audio.duration) progressSlider.value = audio.currentTime / audio.duration;
  };
  audio.onended = () => nextBtn.click();
}

// -- Your playlists ----------------------------------------------------
var soundtracks = [
  {
    name: "New Age for America",
    tracklist: [
      {
        name: "Burning Love",
        artist: "Elvis Presley",
        url:  "https://audio.jukehost.co.uk/CjXjDUMKGADDtqDqNISPGfLCVT0lMeYw",
        cover: "https://i.ibb.co/7N8bNMm6/IMG-2395.jpg"
      },
      {
        name: "Float On",
        artist: "Modest Mouse",
        url:  "https://audio.jukehost.co.uk/xBWzqPqn5w1sYDFwDBdRXzyrXzTRDSRt",
        cover: "https://upload.wikimedia.org/wikipedia/en/e/e4/Modest_Mouse-Float_on-_album_cover.jpg"
      },
      {
        name: "Without Me",
        artist: "Eminem",
        url:  "https://audio.jukehost.co.uk/VZ3h9wEqzJvMLpCJVVg6Cd8Rredx2n32",
        cover: "https://upload.wikimedia.org/wikipedia/en/a/ad/Eminem_-_Without_Me_CD_cover.jpg"
      },
      {
        name: "Somebody Told Me",
        artist: "The Killers",
        url:  "https://audio.jukehost.co.uk/GV8Wk2nHxsdHIBzv0qGI1x7dn8AlP6hc",
        cover: "https://upload.wikimedia.org/wikipedia/en/f/f5/Somebody-Told-Me.jpg"
      },
      {
        name: "Touch the Sky",
        artist: "Kanye West",
        url:  "https://audio.jukehost.co.uk/CEecRaPUPQ1vgwAYsIhMRTBQ4qq4dmIF",
        cover: "https://upload.wikimedia.org/wikipedia/en/5/56/Kanyewest_touchthesky.jpg"
      },
      {
        name: "Toxic",
        artist: "Britney Spears",
        url:  "https://audio.jukehost.co.uk/jNs50cdopNPtwODL9d03PdI86RD035OO",
        cover: "https://upload.wikimedia.org/wikipedia/en/2/21/Britney_Spears_Toxic.png"
      },
      {
        name: "Hey Ya!",
        artist: "OutKast",
        url:  "https://audio.jukehost.co.uk/q6KIYkrSv3U2ztKRABuasRi5CTgY6OLk",
        cover: "https://upload.wikimedia.org/wikipedia/en/d/d8/Hey_Ya_single_cover.png"
      },
      {
        name: "Crazy in Love",
        artist: "Beyonce ft. Jay-Z",
        url:  "https://audio.jukehost.co.uk/fldDyOS48lzKsTrxNOJW4WK87slysxep",
        cover: "https://upload.wikimedia.org/wikipedia/en/3/30/Beyonce_-_Crazy_in_Love_%28single%29.png"
      },
      {
        name: "Let's Get It Started",
        artist: "The Black Eyed Peas",
        url:  "https://audio.jukehost.co.uk/AF9EOhX8IVkcQrpm0esKn6BHnm3ntLHk",
        cover: "https://upload.wikimedia.org/wikipedia/en/9/9f/LetsGetItStarted.jpg"
      },
      {
        name: "Take Me Out",
        artist: "Franz Ferdinand",
        url:  "https://audio.jukehost.co.uk/OxTIUsaWHysTWKkpIad4YkqIrLigrrEj",
        cover: "https://upload.wikimedia.org/wikipedia/en/5/52/Franz_Ferdinand_-_Take_Me_Out.jpg"
      },
      {
        name: "Island in the Sun",
        artist: "Weezer",
        url:  "https://audio.jukehost.co.uk/ND1w5K5F3lHGICbA9MsJgHFTU8gTJPVZ",
        cover: "https://upload.wikimedia.org/wikipedia/en/1/1d/Island_in_the_Sun_by_Weezer_Australian_single.png"
      }
    ]
  }
];

// -- Launch it ---------------------------------------------------------
newMusicPlayer();


//#endcode
